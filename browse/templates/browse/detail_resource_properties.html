{% load project_tags %}
{% if resource|get_type == 'dict' %}
{% for key, value in resource.items %}
{% if key != '_id' and key|first != '@' or key == '@xlink:href' %}
{% if value|get_type == 'dict' %}
<h{{ heading_level }} class="text-dark {% if text_opacity >= 75 %}text-opacity-{{ text_opacity }}{% else %}text-muted fw-normal{% endif %}">{{ key }}</h{{ heading_level }}>
{% for item_key, item_value in value.items %}
{% with resource=item_value heading_level=heading_level|add:1 text_opacity=text_opacity|add:-25 %}
<h{{ heading_level }} class="text-dark {% if text_opacity >= 75 %}text-opacity-{{ text_opacity }}{% else %}text-muted fw-normal{% endif %}">{{ item_key }}</h{{ heading_level }}>
{% with resource=item_value key_name=item_key heading_level=heading_level|add:1 text_opacity=text_opacity|add:-25 %}
{% include 'browse/detail_resource_properties.html' %}
{% endwith %}
{% endwith %}
{% endfor %}
{% elif value|get_type == 'list' %}
<h{{ heading_level }} class="text-dark {% if text_opacity >= 75 %}text-opacity-{{ text_opacity }}{% else %}text-muted fw-normal{% endif %}">{{ key }}</h{{ heading_level }}>
{% with resource=item heading_level=heading_level|add:1 text_opacity=text_opacity|add:-25%}
{% for item in value %}
<h{{ heading_level }} class="text-dark {% if text_opacity >= 75 %}text-opacity-{{ text_opacity }}{% else %}text-muted fw-normal{% endif %}">{{ key }} {{ forloop.counter }}</h{{ heading_level }}>
{% with resource=item heading_level=heading_level|add:1 text_opacity=text_opacity|add:-25%}
{% include 'browse/detail_resource_properties.html' %}
{% endwith %}
{% endfor %}
{% endwith %}
{% else %}
<h{{ heading_level }} class="text-dark {% if text_opacity >= 75 %}text-opacity-{{ text_opacity }}{% else %}text-muted fw-normal{% endif %}">{{ key }}</h{{ heading_level }}>
<p>{{ value|urlize }}</p>
{% endif %}
{% endif %}
{% endfor %}
{% elif resource|get_type == 'list' %}
{% for item in resource %}
<h{{ heading_level }} class="text-dark {% if text_opacity >= 75 %}text-opacity-{{ text_opacity }}{% else %}text-muted fw-normal{% endif %}">{{ key_name }} {{ forloop.counter }}</h{{ heading_level }}>
{% with resource=item %}
{% include 'browse/detail_resource_properties.html' %}
{% endwith %}
{% endfor %}
{% else %}
<p>{{ resource|urlize }}</p>
{% endif %}