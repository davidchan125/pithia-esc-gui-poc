{% load project_tags %}
<details class="details-interaction-methods" name="details-collection-results" {% if forloop.counter == 1 or only_online_resource %}open{% endif %}>
    <summary class="summary-marker-custom py-2">
        <h3 class="fs-5">
            <a href="{{ online_resource.linkage|get_key_value:'gmd:URL' }}" class="link-plain-by-default" target="_blank" rel="noopener noreferrer">
                {{ online_resource.name }}</a>
        </h3>
    </summary>
    <div class="d-flex flex-column align-items-start row-gap-3">
        {% if 'serviceFunction' in online_resource %}
        {% with value=online_resource.serviceFunction|get_key_value:'@xlink:href' %}
        {% include 'browse/placeholders/ontology_server_url_pill_placeholder_no_link.html' %}
        {% endwith %}
        {% else %}
        <span class="badge rounded-pill text-bg-light">
            Linkage
        </span>
        {% endif %}
        {% if 'description' in online_resource and online_resource.description %}
        <p class="mb-0">
            {{ online_resource.description|urlize }}
        </p>
        {% endif %}
        {% if 'protocol' in online_resource or 'dataFormat' in online_resource %}
        <details>
            <summary>More details</summary>
            <dl class="mt-3 ms-3">
                {% if 'protocol' in online_resource %}
                <div>
                    <dt>Protocol</dt>
                    <dd>{{ online_resource.protocol }}</dd>
                </div>
                {% endif %}
                {% if 'dataFormat' in online_resource %}
                <div class="mt-3">
                    <dt>Data Formats</dt>
                    <dd>
                        <ul style="list-style-type: disc;">
                            {% for data_format in online_resource.dataFormat|wrap_in_list_if_dict %}
                            <li>
                                {% with value=data_format|get_key_value:'@xlink:href' %}
                                {% include 'browse/placeholders/ontology_server_url_placeholder.html' %}
                                {% endwith %}
                            </li>
                            {% endfor %}
                        </ul>
                    </dd>
                </div>
                {% endif %}
            </dl>
        </details>
        {% endif %}
    </div>
</details>